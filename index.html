<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="N2O : Erlang WebSocket Application Server">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>N2O</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/5HT/n2o">View on GitHub</a>

          <h1 id="project_title">N2O</h1>
          <h2 id="project_tagline">Erlang WebSocket Application Server</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/5HT/n2o/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/5HT/n2o/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="n2o-erlang-web-framework" class="anchor" href="#n2o-erlang-web-framework"><span class="octicon octicon-link"></span></a>N2O: Erlang Web Framework</h1>

<p><a href="https://travis-ci.org/5HT/n2o"><img src="https://travis-ci.org/5HT/n2o.svg?branch=master" alt="Build Status"></a></p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Formatters: BERT, JSON, Binary or Custom</li>
<li>Protocols: Nitrogen, RoR, N2O</li>
<li>Endpoints: WebSocket, HTTP, REST</li>
<li>PubSub: MQS, GPROC</li>
<li>Templates: DTL</li>
<li>Sessions: STD and Autogenerated Logins</li>
<li>DOM Language: Nitrogen DSL, Erlang Shen</li>
<li>Speed: <strong>15K</strong> <strong>req/s</strong>
</li>
<li>Security: AES CBC 128</li>
<li>Samples: Skyline (DSL), Games (SPA)</li>
</ul>

<h2>
<a name="all-features-in-one-snippet" class="anchor" href="#all-features-in-one-snippet"><span class="octicon octicon-link"></span></a>All Features in One snippet</h2>

<div class="highlight highlight-erlang"><pre><span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">index</span><span class="p">).</span>
<span class="p">-</span><span class="ni">compile</span><span class="p">(</span><span class="n">export_all</span><span class="p">).</span>
<span class="p">-</span><span class="ni">include_lib</span><span class="p">(</span><span class="s">"n2o/include/wf.hrl"</span><span class="p">).</span>

<span class="nf">peer</span><span class="p">()</span>    <span class="o">-&gt;</span> <span class="nn">io_lib</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">"</span><span class="si">~p</span><span class="s">"</span><span class="p">,[</span><span class="nn">wf</span><span class="p">:</span><span class="nf">peer</span><span class="p">(</span><span class="o">?</span><span class="nv">REQ</span><span class="p">)]).</span>
<span class="nf">message</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nn">wf</span><span class="p">:</span><span class="nf">js_escape</span><span class="p">(</span><span class="nn">wf</span><span class="p">:</span><span class="nf">html_encode</span><span class="p">(</span><span class="nn">wf</span><span class="p">:</span><span class="nf">q</span><span class="p">(</span><span class="n">message</span><span class="p">))).</span>
<span class="nf">main</span><span class="p">()</span>    <span class="o">-&gt;</span> <span class="nl">#dtl</span><span class="p">{</span><span class="n">file</span><span class="o">=</span><span class="s">"index"</span><span class="p">,</span><span class="n">app</span><span class="o">=</span><span class="n">n2o_sample</span><span class="p">,</span><span class="n">bindings</span><span class="o">=</span><span class="p">[{</span><span class="n">body</span><span class="p">,</span><span class="n">body</span><span class="p">()}]}.</span>
<span class="nf">body</span><span class="p">()</span> <span class="o">-&gt;</span>
    <span class="p">{</span><span class="n">ok</span><span class="p">,</span><span class="nv">Pid</span><span class="p">}</span> <span class="o">=</span> <span class="nn">wf</span><span class="p">:</span><span class="nf">comet</span><span class="p">(</span><span class="k">fun</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">chat_loop</span><span class="p">()</span> <span class="k">end</span><span class="p">),</span>
    <span class="p">[</span> <span class="nl">#panel</span><span class="p">{</span><span class="n">id</span><span class="o">=</span><span class="n">history</span><span class="p">},</span> <span class="nl">#textbox</span><span class="p">{</span><span class="n">id</span><span class="o">=</span><span class="n">message</span><span class="p">},</span>
      <span class="nl">#button</span><span class="p">{</span><span class="n">id</span><span class="o">=</span><span class="nb">send</span><span class="p">,</span><span class="n">body</span><span class="o">=</span><span class="s">"Chat"</span><span class="p">,</span><span class="n">postback</span><span class="o">=</span><span class="p">{</span><span class="n">chat</span><span class="p">,</span><span class="nv">Pid</span><span class="p">},</span><span class="n">source</span><span class="o">=</span><span class="p">[</span><span class="n">message</span><span class="p">]}</span> <span class="p">].</span>

<span class="nf">event</span><span class="p">(</span><span class="n">init</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nn">wf</span><span class="p">:</span><span class="nf">reg</span><span class="p">(</span><span class="n">room</span><span class="p">);</span>
<span class="nf">event</span><span class="p">({</span><span class="n">chat</span><span class="p">,</span><span class="nv">Pid</span><span class="p">})</span> <span class="o">-&gt;</span> <span class="nv">Pid</span> <span class="o">!</span> <span class="p">{</span><span class="n">peer</span><span class="p">(),</span> <span class="n">message</span><span class="p">()};</span>
<span class="nf">event</span><span class="p">(</span><span class="nv">Event</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">skip</span><span class="p">.</span>

<span class="nf">chat_loop</span><span class="p">()</span> <span class="o">-&gt;</span>
    <span class="k">receive</span> <span class="p">{</span><span class="nv">Peer</span><span class="p">,</span> <span class="nv">Message</span><span class="p">}</span> <span class="o">-&gt;</span>
       <span class="nn">wf</span><span class="p">:</span><span class="nf">insert_bottom</span><span class="p">(</span><span class="n">history</span><span class="p">,</span><span class="nl">#panel</span><span class="p">{</span><span class="n">body</span><span class="o">=</span><span class="p">[</span><span class="nv">Peer</span><span class="p">,</span><span class="s">": "</span><span class="p">,</span><span class="nv">Message</span><span class="p">,</span><span class="nl">#br</span><span class="p">{}]}),</span>
       <span class="nn">wf</span><span class="p">:</span><span class="nf">flush</span><span class="p">(</span><span class="n">room</span><span class="p">)</span> <span class="k">end</span><span class="p">,</span> <span class="n">chat_loop</span><span class="p">().</span>
</pre></div>

<p>And try to compare how this functionality would be implemented
with your favourite language/framework.</p>

<h2>
<a name="performance" class="anchor" href="#performance"><span class="octicon octicon-link"></span></a>Performance</h2>

<p>We are using for measurement ab, httperf, wrk and siege, all of them. The most valuable storm
created by wrk and it is not achieved in real apps but could show us the internal throughput
of individual components. The most near to real life apps is siege who also make DNS lookup
for each request. So this data shows internal data throughput by wrk:</p>

<table>
<thead>
<tr>
<th>Framework</th>
<th>Enabled Components</th>
<th>Speed</th>
<th>Timeouts</th>
</tr>
</thead>
<tbody>
<tr>
<td>PHP5 FCGI</td>
<td>Simple script with two &lt;?php print "OK"; ?&gt; terms inside</td>
<td>5K</td>
<td>timeouts</td>
</tr>
<tr>
<td>Nitrogen</td>
<td>No sessions, No DSL, Simple template with two variable</td>
<td>1K</td>
<td>no</td>
</tr>
<tr>
<td>N2O</td>
<td>All enabled, sessions, Template, heavy DSL</td>
<td>7K</td>
<td>no</td>
</tr>
<tr>
<td>N2O</td>
<td>Sessions enabled, template with two variables, no DSL</td>
<td>10K</td>
<td>no</td>
</tr>
<tr>
<td>N2O</td>
<td>No sessions, No DSL, only template with two vars</td>
<td>15K</td>
<td>no</td>
</tr>
</tbody>
</table>

<h2>
<a name="kickstart-bootstrap" class="anchor" href="#kickstart-bootstrap"><span class="octicon octicon-link"></span></a>Kickstart Bootstrap</h2>

<p>To try N2O you just need to clone a N2O repo from Github and build.
We use very small and powerful mad tool designed for our Web Stack.</p>

<pre><code>$ git clone git://github.com/5HT/n2o
$ cd n2o/samples
$ ./mad deps compile plan repl
</code></pre>

<p>Now you can try: <a href="http://localhost:8000">http://localhost:8000</a></p>

<p>LINUX NOTE: if you want to have online recompilation you should do at first:</p>

<pre><code>$ sudo apt-get install inotify-tools
</code></pre>

<h2>
<a name="support" class="anchor" href="#support"><span class="octicon octicon-link"></span></a>Support</h2>

<ul>
<li>IRC Channel #n2o on FreeNode 24/7</li>
<li>Official N2O Book <a href="http://synrc.com/framework/web/">HTML</a> and <a href="https://synrc.com/apps/n2o/doc/book.pdf">PDF</a>
</li>
</ul>

<h2>
<a name="credits" class="anchor" href="#credits"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul>
<li>Maxim Sokhatsky -- core, shen, windows</li>
<li>Dmitry Bushmelev -- endpoints, yaws, cowboy</li>
<li>Andrii Zadorozhnii -- elements, actions, handlers</li>
<li>Vladimir Kirillov -- mac, bsd, xen, linux support</li>
<li>Andrey Martemyanov -- binary protocols</li>
<li>Oleksandr Nikitin -- security</li>
<li>Anton Logvinenko -- doc</li>
<li>Roman Shestakov -- advanced elements, ct</li>
<li>Jesse Gumm -- nitrogen, help</li>
<li>Rusty Klophaus -- original author</li>
</ul>

<p>OM A HUM</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">N2O maintained by <a href="https://github.com/5HT">5HT</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
